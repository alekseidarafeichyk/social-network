{"version":3,"sources":["api/api.ts","serviceWorker.ts","components/Navbar/Navbar.tsx","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","reducers/AuthReducer/appReducer.ts","redux/redux-store.ts","hoc/WithSuspense.tsx","App.tsx","index.tsx","reducers/AuthReducer/auth-reducer.ts","components/Header/Header.module.css","reducers/ProfileReducer/profile-reducer.ts","reducers/DialogsReducer/dialogs-reducer.ts","utils/validators/objects-helper.ts","reducers/UsersReducer/users-reducer.ts","assets/images/logo.jpg","components/Navbar/Navbar.module.css"],"names":["instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","getUserProfile","userId","console","warn","profileAPI","followUser","post","unFollowUser","delete","getStatus","changeStatus","status","put","authAPI","me","login","email","password","rememberMe","logout","Boolean","window","location","hostname","match","Navbar","className","classes","nav","item","to","activeClassName","activeLink","Header","props","style","header","src","logo","alt","loginBlock","auth","isAuth","onClick","logoutTC","HeaderContainer","this","React","Component","connect","state","InitialState","initialized","reducers","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","usersPage","usersReducer","authReducer","form","formReducer","app","action","type","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleWare","WithSuspense","fallback","CircularProgress","size","DialogsContainer","lazy","ProfileContainer","News","Music","Setting","UsersContainer","Login","App","initializedApp","path","render","disableShrink","AppContainer","withRouter","dispatch","promise","getAuthUserDataTC","Promise","all","SocialTSApp","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","id","setUserDataAC","a","resultCode","loginTC","messages","length","stopSubmit","_error","module","exports","ADD_POST","initialState","posts","v1","likeCounts","newPostText","profile","newPost","postText","newStatus","addPostAC","text","changeStatusAC","getUserStatus","resolve","changeUserStatus","dialogs","name","newMessageText","newMessage","messageText","addMessageAC","updateObjectInArray","items","itemId","objPropertyName","newObjProps","map","u","users","totalUsersCount","isFetching","followingInProgress","portionSize","followed","totalCount","value","filter","followAC","unFollowAC","setCurrentPageAC","toogleIsFetchingAC","toogleFollowingProgressAC","requestUsers","page","followUnfollowFlow","userID","apiMethod","actionCreator","unFollowUserThunk","bind","followUserThunk"],"mappings":"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","file":"static/js/main.c6c0ec90.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': '628f1297-6b8a-455c-a591-d2e75c4bd3a6'\r\n    }\r\n})\r\n\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`,\r\n            {withCredentials: true})\r\n            .then(response => response.data)\r\n    },\r\n    getUserProfile(userId: string) {\r\n        console.warn('Obsolete method.Please profileAPI object');\r\n        return profileAPI.getUserProfile(userId);\r\n    },\r\n    followUser(userId: number) {\r\n        return instance.post(`follow/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    unFollowUser(userId: number) {\r\n        return instance.delete(`follow/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\n\r\nexport const profileAPI = {\r\n    getUserProfile(userId = '9442') {\r\n        return instance.get(`profile/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    getStatus(userId: string) {\r\n        return instance.get(`profile/status/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    changeStatus(status: string) {\r\n        return instance.put('profile/status', {status})\r\n            .then(response => response.data);\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get(`auth/me`)\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean = false) {\r\n        return instance.post('/auth/login', {email, password, rememberMe})\r\n    },\r\n    logout() {\r\n        return instance.delete('/auth/login')\r\n    },\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport classes from './Navbar.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nfunction Navbar() {\r\n    return (\r\n        <nav className={classes.nav}>\r\n            <div className={classes.item}>\r\n                <NavLink to='/profile' activeClassName={classes.activeLink}>Profile</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/dialogs' activeClassName={classes.activeLink}>Messages</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/news' activeClassName={classes.activeLink}>News</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/music' activeClassName={classes.activeLink}>Music</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink  to='/setting' activeClassName={classes.activeLink}>Setting</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/users' activeClassName={classes.activeLink}>Users</NavLink>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Navbar;","import React from \"react\";\r\nimport style from './Header.module.css';\r\nimport logo from '../../assets/images/logo.jpg'\r\nimport { NavLink } from \"react-router-dom\";\r\nimport classes from '../Navbar/Navbar.module.css';\r\nimport {HeaderContainerPropsType, MapStatePropsType} from './HeaderContainer';\r\n\r\nfunction Header(props: HeaderContainerPropsType) {\r\n\r\n    const onClickLogout = () => {\r\n        props.logoutTC()\r\n    }\r\n\r\n    return (\r\n        <header className={style.header}>\r\n            <img\r\n                src={logo}\r\n                alt=\"logo\"/>\r\n                <div className={style.loginBlock}>\r\n                    { props.auth.isAuth ?\r\n                        <div>{props.auth.login} - <button onClick={onClickLogout}>logout</button> </div>:\r\n                    <NavLink to='/login'>Login</NavLink> }\r\n                </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport Header from './Header';\r\nimport {connect} from 'react-redux';\r\nimport {RootState} from '../../redux/redux-store';\r\nimport {AuthStateType, logoutTC} from '../../reducers/AuthReducer/auth-reducer';\r\n\r\ntype MapDispatchPropsType = {\r\n    logoutTC : () => void\r\n}\r\n\r\nexport type MapStatePropsType = {\r\n    auth: AuthStateType\r\n}\r\n\r\nexport type HeaderContainerPropsType = MapDispatchPropsType & MapStatePropsType\r\n\r\n\r\nexport class HeaderContainer extends React.Component<HeaderContainerPropsType> {\r\n    render() {\r\n        return <Header {...this.props}/>;\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state: RootState): MapStatePropsType => {\r\n    return {\r\n        auth: state.auth,\r\n    }\r\n}\r\n\r\nexport default connect<MapStatePropsType, MapDispatchPropsType, {}, RootState>(mapStateToProps, {logoutTC})(HeaderContainer)\r\n","import { Dispatch } from \"redux\"\r\nimport {getAuthUserDataTC} from './auth-reducer';\r\n\r\nconst INITIALIZED_SUCCESS = 'app/INITIALIZED_SUCCSESS'\r\n\r\n\r\nlet InitialState: InitialStateType = {\r\n    initialized: false\r\n}\r\n\r\nexport const appReducer = (state = InitialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {...state, initialized: true}\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\n//actions\r\nexport const initializedSuccess = () =>\r\n    ({type: INITIALIZED_SUCCESS} as const)\r\n\r\n//thunks\r\nexport const initializedAppTC = () => (dispatch: Dispatch<any>) => {\r\n    let promise = dispatch(getAuthUserDataTC())\r\n    Promise.all([promise])\r\n        .then(() => {\r\n            dispatch(initializedSuccess())\r\n        })\r\n}\r\n\r\n//types\r\ntype ActionTypes = ReturnType<typeof initializedSuccess>\r\nexport type InitialStateType = { initialized: boolean }\r\n\r\n","import {combineReducers, createStore, applyMiddleware, compose} from 'redux'\r\nimport {ProfileActionType, profileReducer} from '../reducers/ProfileReducer/profile-reducer';\r\nimport {DialogsActionType, dialogsReducer} from '../reducers/DialogsReducer/dialogs-reducer';\r\nimport {UserActionType, usersReducer} from '../reducers/UsersReducer/users-reducer';\r\nimport {AuthActionType, authReducer} from '../reducers/AuthReducer/auth-reducer';\r\nimport thunkMiddleWare from 'redux-thunk';\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport {appReducer} from '../reducers/AuthReducer/appReducer';\r\n\r\n\r\nexport type ActionsType = ProfileActionType | DialogsActionType | UserActionType | AuthActionType\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth : authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n})\r\n\r\nexport type RootState = ReturnType<typeof reducers>\r\n\r\ndeclare global {\r\n    interface Window {\r\n        __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n    }\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n\r\nconst store = createStore(reducers , composeEnhancers(applyMiddleware(thunkMiddleWare)))\r\n\r\nexport default store;\r\n\r\n","import React, {Suspense} from 'react';\r\nimport {CircularProgress} from '@material-ui/core';\r\n\r\n\r\nexport const WithSuspense = (Component: any) => {\r\n    return (props: any) => <Suspense fallback={<CircularProgress size={100}/>}>\r\n        <Component {...props}/>\r\n    </Suspense>\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport {HashRouter, Route, withRouter} from 'react-router-dom';\r\nimport HeaderContainer from './components/Header/HeaderContainer';\r\nimport {compose} from 'redux';\r\nimport {connect, Provider} from 'react-redux';\r\nimport {initializedAppTC} from './reducers/AuthReducer/appReducer';\r\nimport store, {RootState} from './redux/redux-store';\r\nimport {CircularProgress} from '@material-ui/core';\r\nimport {WithSuspense} from './hoc/WithSuspense';\r\n\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\nconst News = React.lazy(() => import('./components/News/News'));\r\nconst Music = React.lazy(() => import('./components/Music/Music'));\r\nconst Setting = React.lazy(() => import('./components/Setting/Setting'));\r\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\r\nconst Login = React.lazy(() => import('./components/Login/Login'));\r\n\r\n\r\ntype MapDispatchToPropsType = {\r\n    initializedApp: () => void\r\n}\r\ntype MapStateToPropsType = {\r\n    initialized: boolean\r\n}\r\ntype AppPropsType = MapDispatchToPropsType & MapStateToPropsType\r\n\r\nclass App extends React.Component<AppPropsType, RootState> {\r\n    componentDidMount() {\r\n        this.props.initializedApp()\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialized) {\r\n            return <CircularProgress disableShrink\r\n                                     size={100}/>\r\n        }\r\n\r\n        return (\r\n            <div className='app-wrapper'>\r\n                <HeaderContainer/>\r\n                <Navbar/>\r\n                <div className={'app-wrapper-content'}>\r\n                    <Route path={'/profile/:userId?'} render={WithSuspense(ProfileContainer)}/>\r\n                    <Route path={'/dialogs'} render={WithSuspense(DialogsContainer)}/>\r\n                    <Route path={'/news'} render={WithSuspense(News)}/>\r\n                    <Route path={'/music'} render={WithSuspense(Music)}/>\r\n                    <Route path={'/setting'} render={WithSuspense(Setting)}/>\r\n                    <Route path={'/users'} render={WithSuspense(UsersContainer)}/>\r\n                    <Route path={'/login'} render={WithSuspense(Login)}/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n    return {initialized: state.app.initialized}\r\n}\r\n\r\nconst AppContainer = compose<React.ComponentType>(\r\n    withRouter,\r\n    connect(mapStateToProps, {initializedApp: initializedAppTC}))\r\n(App)\r\n\r\nlet SocialTSApp = (props: any) => {\r\n    return <HashRouter>\r\n        <Provider store={store}>\r\n            <AppContainer/>\r\n        </Provider>\r\n    </HashRouter>\r\n}\r\n\r\nexport default SocialTSApp\r\n\r\n","import React from 'react';\r\nimport './index.css';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport ReactDOM from 'react-dom';\r\nimport SocialTSApp from './App';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <SocialTSApp/>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import {authAPI} from '../../api/api';\r\nimport {Dispatch} from 'react';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA'\r\n\r\nlet InitialState: AuthStateType = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n}\r\n\r\nexport const authReducer = (state: AuthStateType = InitialState, action: AuthActionType): AuthStateType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                id: action.userId,\r\n                email: action.email,\r\n                login: action.login,\r\n                isAuth: action.isAuth,\r\n            }\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\n//actions\r\nexport const setUserDataAC = (userId: number | null, email: string | null, login: string | null, isAuth: boolean) =>\r\n    ({type: SET_USER_DATA, userId, email, login, isAuth} as const)\r\n\r\n//thunks\r\nexport const getAuthUserDataTC = () => async (dispatch: Dispatch<AuthActionType>) => {\r\n      const response = await authAPI.me()\r\n                if (response.data.resultCode === 0) {\r\n                    let {id, login, email} = response.data.data\r\n                    dispatch(setUserDataAC(id, login, email, true))\r\n                }\r\n    }\r\n\r\nexport const loginTC = (email: string, password: string, rememberMe: boolean) => async (dispatch: Dispatch<any>) => {\r\n  const response =  await authAPI.login(email, password, rememberMe)\r\n                if (response.data.resultCode === 0) {\r\n                dispatch(getAuthUserDataTC())\r\n            } else {\r\n                let message = response.data.messages.length > 0 ? response.data.messages : 'Some error'\r\n                dispatch(stopSubmit('login', {_error: `${message}`}))\r\n            }\r\n\r\n}\r\nexport const logoutTC = () => async (dispatch: Dispatch<AuthActionType>) => {\r\n  const response = await authAPI.logout()\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(setUserDataAC(null, null, null, false))\r\n            }\r\n}\r\n\r\n//types\r\nexport type AuthStateType = {\r\n    id: number | null\r\n    email: string | null\r\n    login: string | null\r\n    isAuth: boolean\r\n}\r\nexport type AuthActionType = ReturnType<typeof setUserDataAC>\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__ik6ZR\",\"loginBlock\":\"Header_loginBlock__2LZXi\"};","import {v1} from 'uuid'\r\nimport {Dispatch} from 'react';\r\nimport {profileAPI, usersAPI} from '../../api/api';\r\n\r\nconst ADD_POST = 'profile/ADD_POST'\r\nconst SET_USER_PROFILE = 'profile/SET_USER_PROFILE'\r\nconst SET_STATUS = 'profile/SET_STATUS'\r\nconst CHANGE_STATUS = 'profile/CHANGE_STATUS'\r\n\r\n//Разобраться с newPostText в инитиал стейте\r\n\r\nconst initialState: ProfileStateType = {\r\n    posts: [\r\n        {id: v1(), message: 'Hi', likeCounts: 25},\r\n        {id: v1(), message: 'Hello', likeCounts: 20},\r\n    ],\r\n    newPostText: '',\r\n    profile: null,\r\n    status: '',\r\n}\r\n\r\nexport const profileReducer = (state\r\n                                   = initialState, action: ProfileActionType): ProfileStateType => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost: PostType = {\r\n                id: v1(),\r\n                message: action.postText,\r\n                likeCounts: 0\r\n            }\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n                newPostText: ''\r\n            };\r\n        case SET_USER_PROFILE : {\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_STATUS: {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case CHANGE_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.newStatus\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//actions\r\nexport const addPostAC = (text: string) => ({type: ADD_POST, postText: text} as const)\r\nexport const setUserProfileAC = (profile: ProfileType) => ({type: SET_USER_PROFILE, profile} as const)\r\nexport const setStatusAC = (status: string) => ({type: SET_STATUS, status} as const)\r\nexport const changeStatusAC = (newStatus: string) => ({type: CHANGE_STATUS, newStatus} as const)\r\n\r\n//thunks\r\nexport const getUserProfile = (userId: string) => {\r\n    return (dispatch: DispatchUserProfile) => {\r\n\r\n        usersAPI.getUserProfile(userId)\r\n            .then(data => {\r\n\r\n                dispatch(setUserProfileAC(data))\r\n            })\r\n    }\r\n}\r\nexport const getUserStatus = (userId: string) => async (dispatch: Dispatch<ProfileActionType>) => {\r\n    const resolve = await profileAPI.getStatus(userId)\r\n    dispatch(setStatusAC(resolve))\r\n}\r\n\r\nexport const changeUserStatus = (newStatus: string) => async (dispatch: Dispatch<ProfileActionType>) => {\r\n   let response = await profileAPI.changeStatus(newStatus)\r\n            if (response.resultCode === 0) {\r\n                dispatch(changeStatusAC(newStatus))\r\n            }\r\n}\r\n\r\n//types\r\n\r\nexport type ProfileStateType = {\r\n    posts: Array<PostType>,\r\n    newPostText: string,\r\n    profile: null | ProfileType\r\n    status: string\r\n}\r\nexport type ProfileType = {\r\n    aboutMe: string\r\n    contacts: ContactsType\r\n    lookingForAJob: boolean,\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    userId: number,\r\n    photos: PhotosType\r\n}\r\nexport type ContactsType = {\r\n    facebook: string\r\n    website: null\r\n    vk: string\r\n    twitter: string\r\n    instagram: string\r\n    youtube: null\r\n    github: string\r\n    mainLink: null\r\n}\r\nexport type PhotosType = {\r\n    small: string\r\n    large: string\r\n}\r\ntype DispatchUserProfile = Dispatch<ProfileActionType>\r\nexport type ProfileActionType =\r\n    | ReturnType<typeof addPostAC>\r\n    | ReturnType<typeof setUserProfileAC>\r\n    | ReturnType<typeof setStatusAC>\r\n    | ReturnType<typeof changeStatusAC>\r\nexport type PostType = {\r\n    id: string,\r\n    message: string,\r\n    likeCounts: number\r\n}\r\n\r\nexport type ProfilePageType = {\r\n    posts: Array<PostType>,\r\n    newPostText: string\r\n}\r\n\r\n\r\n","import {v1} from 'uuid';\r\n\r\nconst ADD_MESSAGE = 'dialogs/Add-Message'\r\n\r\nlet initialState: DialogsStateType = {\r\n    dialogs: [\r\n        {id: v1(), name: 'Alex'},\r\n        {id: v1(), name: 'Dima'},\r\n        {id: v1(), name: 'Azamat'},\r\n        {id: v1(), name: 'Sergey'},\r\n        {id: v1(), name: 'Alexander'},\r\n    ],\r\n    messages: [\r\n        {id: v1(), message: 'Hello'},\r\n        {id: v1(), message: 'h1'},\r\n        {id: v1(), message: 'How yo`re doing?'},\r\n        {id: v1(), message: 'bye'},\r\n    ],\r\n    newMessageText: '',\r\n}\r\n \r\n//actions\r\nexport const dialogsReducer = (state = initialState, action: DialogsActionType) => {\r\n    switch (action.type) {\r\n        case ADD_MESSAGE :\r\n            let newMessage: MessageType = {\r\n                id: v1(),\r\n                message: action.messageText\r\n            }\r\n            return {\r\n                ...state,\r\n                messages: [\r\n                    ...state.messages,\r\n                    newMessage,\r\n                ],\r\n                newMessageText: ''\r\n            }\r\n        default:\r\n            return state\r\n\r\n    }\r\n}\r\nexport const addMessageAC = (text: string) => ({type: ADD_MESSAGE, messageText: text} as const)\r\n\r\n//types\r\n\r\nexport type  DialogsActionType =\r\n    | ReturnType<typeof addMessageAC>\r\nexport type DialogsStateType = {\r\n    dialogs: Array<DialogType>,\r\n    messages: Array<MessageType>,\r\n    newMessageText: string,\r\n}\r\nexport type MessageType = {\r\n    id: string\r\n    message: string\r\n}\r\nexport type DialogType = {\r\n    id: string,\r\n    name: string\r\n}\r\n\r\n","export const updateObjectInArray = (items: Array<any>, itemId: any, objPropertyName: any, newObjProps: any) => {\r\n    return  items.map(u => {\r\n        if (u[objPropertyName] === itemId) {\r\n            return {...u, ...newObjProps}\r\n        } else {\r\n            return u\r\n        }\r\n    })\r\n}","import {usersAPI} from '../../api/api';\r\nimport {Dispatch} from 'react';\r\nimport {updateObjectInArray} from '../../utils/validators/objects-helper';\r\n\r\nconst FOLLOW = 'user/FOLLOW'\r\nconst UNFOLLOW = 'user/UNFOLLOW'\r\nconst SET_USERS = 'user/SET_USERS'\r\nconst SET_CURRENT_PAGE = 'user/SET_CURRENT_PAGE'\r\nconst SET_TOTAL_COUNT = 'user/SET_TOTAL_COUNT'\r\nconst TOGGLE_IS_FETCHING = 'user/TOGGLE_IS_FETCHING'\r\nconst TOGGLE_FOLLOWING_PROGRESS = 'user/TOGGLE_FOLLOWING_PROGRESS'\r\n\r\nexport let InitialState: UsersStateType = {\r\n    users: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: [],\r\n    portionSize: 10\r\n}\r\n\r\n\r\nexport const usersReducer = (state = InitialState, action: UserActionType): UsersStateType => {\r\n    switch (action.type) {\r\n        case FOLLOW :\r\n            return {\r\n                ...state,\r\n                users : updateObjectInArray(state.users,action.userId,'id',{followed: true})\r\n            }\r\n        case UNFOLLOW :\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users,action.userId,'id',{followed: false})\r\n            }\r\n        case SET_USERS:\r\n            return {...state, users: [...action.users]}\r\n        case SET_CURRENT_PAGE:\r\n            return {...state, currentPage: action.currentPage}\r\n        case SET_TOTAL_COUNT:\r\n            return {...state, totalUsersCount: action.totalCount}\r\n        case TOGGLE_IS_FETCHING:\r\n            return {...state, isFetching: action.value}\r\n        case TOGGLE_FOLLOWING_PROGRESS: {\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching ?\r\n                    [...state.followingInProgress, action.userId] :\r\n                    state.followingInProgress.filter(id => id != action.userId)\r\n            }\r\n        }\r\n        default :\r\n            return state\r\n    }\r\n};\r\n\r\n\r\n//actions\r\nexport const followAC = (userId: number) => ({type: FOLLOW, userId} as const)\r\nexport const unFollowAC = (userId: number) => ({type: UNFOLLOW, userId} as const)\r\nexport const setUsersAC = (users: Array<UsersType>) => ({type: SET_USERS, users} as const)\r\nexport const setCurrentPageAC = (currentPage: number) => ({type: SET_CURRENT_PAGE, currentPage} as const)\r\nexport const setTotalCountAC = (totalCount: number) => ({type: SET_TOTAL_COUNT, totalCount} as const)\r\nexport const toogleIsFetchingAC = (value: boolean) => ({type: TOGGLE_IS_FETCHING, value} as const)\r\nexport const toogleFollowingProgressAC = (isFetching: boolean, userId: number) => ({\r\n    type: TOGGLE_FOLLOWING_PROGRESS,\r\n    isFetching,\r\n    userId\r\n} as const)\r\n\r\n\r\n//thunks\r\nexport const requestUsers = (page: number, pageSize: number) => async (dispatch: DispatchType) => {\r\n\r\n    dispatch(toogleIsFetchingAC(true))\r\n    dispatch(setCurrentPageAC(page))\r\n\r\n    const response = await usersAPI.getUsers(page, pageSize)\r\n\r\n    dispatch(toogleIsFetchingAC(false))\r\n    dispatch(setUsersAC(response.items))\r\n    dispatch(setTotalCountAC(response.totalCount))\r\n}\r\n\r\n\r\nconst followUnfollowFlow =  async (dispatch: DispatchType,userID: number,apiMethod: any, actionCreator : any ) => {\r\n    dispatch(toogleFollowingProgressAC(true, userID))\r\n    const response = await apiMethod(userID)\r\n\r\n    if (response.resultCode === 0) {\r\n        dispatch(actionCreator(userID))\r\n    }\r\n\r\n    dispatch(toogleFollowingProgressAC(false, userID))\r\n}\r\n\r\n\r\n\r\nexport const unFollowUserThunk = (userID: number) => async (dispatch: DispatchType) => {\r\n    await followUnfollowFlow(dispatch,userID,usersAPI.unFollowUser.bind(userID),unFollowAC)\r\n}\r\nexport const followUserThunk = (userID: number) => async (dispatch: DispatchType) => {\r\n    await followUnfollowFlow(dispatch,userID,usersAPI.followUser.bind(userID),followAC)\r\n}\r\n\r\n//types\r\ntype DispatchType = Dispatch<UserActionType>\r\nexport type UsersStateType = {\r\n    users: Array<UsersType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followingInProgress: Array<number>\r\n    portionSize: number\r\n\r\n}\r\nexport type UsersType = {\r\n    name: string\r\n    id: number\r\n    uniqueUrlName: null\r\n    photos: FhotoUserType\r\n    status: null\r\n    followed: boolean\r\n}\r\ntype FhotoUserType = {\r\n    small: null | string\r\n    large: null | string\r\n}\r\ntype Location = {\r\n    country: string\r\n    city: string\r\n}\r\nexport type UserActionType =\r\n    | ReturnType<typeof followAC>\r\n    | ReturnType<typeof unFollowAC>\r\n    | ReturnType<typeof setUsersAC>\r\n    | ReturnType<typeof setCurrentPageAC>\r\n    | ReturnType<typeof setTotalCountAC>\r\n    | ReturnType<typeof toogleIsFetchingAC>\r\n    | ReturnType<typeof toogleFollowingProgressAC>\r\n\r\n\r\n\r\n","module.exports = \"data:image/jpeg;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__1Fel9\",\"item\":\"Navbar_item__1g377\",\"activeLink\":\"Navbar_activeLink__2gg7Q\"};"],"sourceRoot":""}