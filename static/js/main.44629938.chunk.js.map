{"version":3,"sources":["components/Navbar/Navbar.module.css","serviceWorker.ts","components/Navbar/Navbar.tsx","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","reducers/AuthReducer/appReducer.ts","redux/redux-store.ts","hoc/WithSuspense.tsx","App.tsx","index.tsx","reducers/AuthReducer/auth-reducer.ts","components/common/Loader/Loader.tsx","components/Header/Header.module.css","components/common/Button/Button.tsx","reducers/ProfileReducer/profile-reducer.ts","reducers/DialogsReducer/dialogs-reducer.ts","api/api.ts","utils/validators/objects-helper.ts","reducers/UsersReducer/users-reducer.ts","assets/images/logo.png","components/common/Button/Button.module.css","components/common/Loader/Loader.module.css"],"names":["module","exports","Boolean","window","location","hostname","match","Navbar","className","classes","nav","item","to","activeClassName","activeLink","Header","props","style","header","src","logo","alt","loginBlock","auth","isAuth","login","Button","onClick","logoutTC","name","HeaderContainer","this","React","Component","connect","state","InitialState","initialized","reducers","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","usersPage","usersReducer","authReducer","form","formReducer","app","action","type","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleWare","WithSuspense","fallback","Loader","DialogsContainer","lazy","ProfileContainer","News","Music","Setting","UsersContainer","Login","App","catchAllUnhandledErrors","promiseRejectionEvent","console","log","initializedApp","addEventListener","removeEventListener","path","render","exact","from","AppContainer","withRouter","dispatch","promise","getAuthUserDataTC","Promise","all","then","SocialTSApp","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","id","email","captcha","userId","captchaUrl","setUserDataAC","a","authAPI","me","response","data","resultCode","loginTC","password","rememberMe","getCaptcha","messages","length","stopSubmit","_error","securityAPI","getCaptchaUrl","url","logout","ldsRing","memo","rest","button","ADD_POST","initialState","posts","v1","likeCounts","newPostText","profile","status","newPost","postText","newStatus","photos","photo","addPostAC","text","changeStatusAC","savePhotoSuccessAC","getUserProfile","usersAPI","getUserStatus","profileAPI","getStatus","resolve","changeUserStatus","changeStatus","ChangeMyPhoto","saveProfileData","getState","reject","dialogs","newMessageText","newMessage","messageText","addMessageAC","instance","axios","create","withCredentials","baseURL","headers","getUsers","currentPage","pageSize","get","warn","followUser","post","unFollowUser","delete","put","photoFile","formData","FormData","append","updateObjectInArray","items","itemId","objPropertyName","newObjProps","map","u","users","totalUsersCount","isFetching","followingInProgress","portionSize","followed","totalCount","value","filter","followAC","unFollowAC","setCurrentPageAC","toogleIsFetchingAC","toogleFollowingProgressAC","requestUsers","page","followUnfollowFlow","userID","apiMethod","actionCreator","unFollowUserThunk","bind","followUserThunk"],"mappings":"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","file":"static/js/main.44629938.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__1Fel9\",\"item\":\"Navbar_item__1g377\",\"activeLink\":\"Navbar_activeLink__2gg7Q\"};","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport classes from './Navbar.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nfunction Navbar() {\r\n    return (\r\n        <nav className={classes.nav}>\r\n            <div className={classes.item}>\r\n                <NavLink to='/profile' activeClassName={classes.activeLink}>Profile</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/users' activeClassName={classes.activeLink}>Users</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/dialogs' activeClassName={classes.activeLink}>Messages</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/news' activeClassName={classes.activeLink}>News</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/music' activeClassName={classes.activeLink}>Music</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink  to='/setting' activeClassName={classes.activeLink}>Setting</NavLink>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Navbar;","import React from 'react';\r\nimport style from './Header.module.css';\r\nimport logo from '../../assets/images/logo.png'\r\nimport {NavLink} from 'react-router-dom';\r\nimport {HeaderContainerPropsType} from './HeaderContainer';\r\nimport {Button} from '../common/Button/Button';\r\n\r\nfunction Header(props: HeaderContainerPropsType) {\r\n\r\n    const onClickLogout = () => {\r\n        props.logoutTC()\r\n    }\r\n\r\n    return (\r\n        <header className={style.header}>\r\n            <img\r\n                src={logo}\r\n                alt=\"logo\"/>\r\n            <div className={style.loginBlock}>\r\n                {props.auth.isAuth ?\r\n                    <div>{props.auth.login} - <Button onClick={onClickLogout} name={'logout'}/></div> :\r\n                    <NavLink to='/login'>Login</NavLink>}\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport Header from './Header';\r\nimport {connect} from 'react-redux';\r\nimport {RootState} from '../../redux/redux-store';\r\nimport {AuthStateType, logoutTC} from '../../reducers/AuthReducer/auth-reducer';\r\n\r\ntype MapDispatchPropsType = {\r\n    logoutTC : () => void\r\n}\r\n\r\nexport type MapStatePropsType = {\r\n    auth: AuthStateType\r\n}\r\n\r\nexport type HeaderContainerPropsType = MapDispatchPropsType & MapStatePropsType\r\n\r\n\r\nexport class HeaderContainer extends React.Component<HeaderContainerPropsType> {\r\n    render() {\r\n        return <Header {...this.props}/>;\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state: RootState): MapStatePropsType => {\r\n    return {\r\n        auth: state.auth,\r\n    }\r\n}\r\n\r\nexport default connect<MapStatePropsType, MapDispatchPropsType, {}, RootState>(mapStateToProps, {logoutTC})(HeaderContainer)\r\n","import { Dispatch } from \"redux\"\r\nimport {getAuthUserDataTC} from './auth-reducer';\r\n\r\nconst INITIALIZED_SUCCESS = 'app/INITIALIZED_SUCCSESS'\r\n\r\n\r\nlet InitialState: InitialStateType = {\r\n    initialized: false\r\n}\r\n\r\nexport const appReducer = (state = InitialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {...state, initialized: true}\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\n//actions\r\nexport const initializedSuccess = () =>\r\n    ({type: INITIALIZED_SUCCESS} as const)\r\n\r\n//thunks\r\nexport const initializedAppTC = () => (dispatch: Dispatch<any>) => {\r\n    let promise = dispatch(getAuthUserDataTC())\r\n    Promise.all([promise])\r\n        .then(() => {\r\n            dispatch(initializedSuccess())\r\n        })\r\n}\r\n\r\n//types\r\ntype ActionTypes = ReturnType<typeof initializedSuccess>\r\nexport type InitialStateType = { initialized: boolean }\r\n\r\n","import {combineReducers, createStore, applyMiddleware, compose} from 'redux'\r\nimport {ProfileActionType, profileReducer} from '../reducers/ProfileReducer/profile-reducer';\r\nimport {DialogsActionType, dialogsReducer} from '../reducers/DialogsReducer/dialogs-reducer';\r\nimport {UserActionType, usersReducer} from '../reducers/UsersReducer/users-reducer';\r\nimport {AuthActionType, authReducer} from '../reducers/AuthReducer/auth-reducer';\r\nimport thunkMiddleWare from 'redux-thunk';\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport {appReducer} from '../reducers/AuthReducer/appReducer';\r\n\r\n\r\nexport type ActionsType = ProfileActionType | DialogsActionType | UserActionType | AuthActionType\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth : authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n})\r\n\r\nexport type RootState = ReturnType<typeof reducers>\r\n\r\ndeclare global {\r\n    interface Window {\r\n        __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n    }\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n\r\nconst store = createStore(reducers , composeEnhancers(applyMiddleware(thunkMiddleWare)))\r\n\r\nexport default store;\r\n\r\n","import React, {Suspense} from 'react';\r\nimport {Loader} from '../components/common/Loader/Loader';\r\n\r\n\r\nexport const WithSuspense = (Component: any) => {\r\n    return (props: any) => <Suspense fallback={<Loader/>}>\r\n        <Component {...props}/>\r\n    </Suspense>\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport {HashRouter, Redirect, Route, Switch, withRouter} from 'react-router-dom';\r\nimport HeaderContainer from './components/Header/HeaderContainer';\r\nimport {compose} from 'redux';\r\nimport {connect, Provider} from 'react-redux';\r\nimport {initializedAppTC} from './reducers/AuthReducer/appReducer';\r\nimport store, {RootState} from './redux/redux-store';\r\nimport {WithSuspense} from './hoc/WithSuspense';\r\nimport {Loader} from './components/common/Loader/Loader';\r\n\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\nconst News = React.lazy(() => import('./components/News/News'));\r\nconst Music = React.lazy(() => import('./components/Music/Music'));\r\nconst Setting = React.lazy(() => import('./components/Setting/Setting'));\r\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\r\nconst Login = React.lazy(() => import('./components/Login/Login'));\r\n\r\n\r\ntype MapDispatchToPropsType = {\r\n    initializedApp: () => void\r\n}\r\ntype MapStateToPropsType = {\r\n    initialized: boolean\r\n}\r\ntype AppPropsType = MapDispatchToPropsType & MapStateToPropsType\r\n\r\nclass App extends React.Component<AppPropsType, RootState> {\r\n   catchAllUnhandledErrors = (promiseRejectionEvent: PromiseRejectionEvent) =>{\r\n        //создать глобал эрор и диспатчить\r\n        // alert('Some error occured');\r\n        console.log(promiseRejectionEvent)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.initializedApp()\r\n        window.addEventListener('unhandledrejection',this.catchAllUnhandledErrors)\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener('unhandledrejection',this.catchAllUnhandledErrors)\r\n    }\r\n\r\n\r\n    render() {\r\n        if (!this.props.initialized) {\r\n            return <Loader/>\r\n        }\r\n\r\n        return (\r\n            <div className='app-wrapper'>\r\n                <HeaderContainer/>\r\n                <Navbar/>\r\n                <div className={'app-wrapper-content'}>\r\n                    <Switch>\r\n                        <Route path={'/profile/:userId?'} render={WithSuspense(ProfileContainer)}/>\r\n                        <Route path={'/users'} render={WithSuspense(UsersContainer)}/>\r\n                        <Route path={'/dialogs'} render={WithSuspense(DialogsContainer)}/>\r\n                        <Route path={'/news'} render={WithSuspense(News)}/>\r\n                        <Route path={'/music'} render={WithSuspense(Music)}/>\r\n                        <Route path={'/setting'} render={WithSuspense(Setting)}/>\r\n                        <Route path={'/login'} render={WithSuspense(Login)}/>\r\n                        <Redirect exact from=\"/\" to=\"/profile\" />\r\n                    </Switch>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n    return {initialized: state.app.initialized}\r\n}\r\n\r\nconst AppContainer = compose<React.ComponentType>(\r\n    withRouter,\r\n    connect(mapStateToProps, {initializedApp: initializedAppTC}))\r\n(App)\r\n\r\nlet SocialTSApp = (props: any) => {\r\n    return <HashRouter>\r\n        <Provider store={store}>\r\n            <AppContainer/>\r\n        </Provider>\r\n    </HashRouter>\r\n}\r\n\r\nexport default SocialTSApp\r\n\r\n","import React from 'react';\r\nimport './index.css';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport ReactDOM from 'react-dom';\r\nimport SocialTSApp from './App';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <SocialTSApp/>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import {authAPI, securityAPI} from '../../api/api';\r\nimport {Dispatch} from 'react';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA'\r\nconst SET_CAPTCHA_URL = 'auth/SET_CAPTCHA_URL'\r\n\r\nlet InitialState: AuthStateType = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captcha: null\r\n}\r\n\r\nexport const authReducer = (state: AuthStateType = InitialState, action: AuthActionType): AuthStateType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                id: action.userId,\r\n                email: action.email,\r\n                login: action.login,\r\n                isAuth: action.isAuth,\r\n            }\r\n        case 'auth/SET_CAPTCHA_URL':\r\n            return {\r\n                ...state,\r\n                captcha: action.captchaUrl\r\n            }\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\n//actions\r\nexport const setUserDataAC = (userId: string | null, email: string | null, login: string | null, isAuth: boolean) =>\r\n    ({type: SET_USER_DATA, userId, email, login, isAuth} as const)\r\nexport const setCaptchaUrl = (captchaUrl: string) => ({type: SET_CAPTCHA_URL, captchaUrl} as const)\r\n\r\n\r\n//thunks\r\nexport const getAuthUserDataTC = () => async (dispatch: Dispatch<AuthActionType>) => {\r\n    const response = await authAPI.me()\r\n    if (response.data.resultCode === 0) {\r\n        let {id, login, email} = response.data.data\r\n        dispatch(setUserDataAC(id, login, email, true))\r\n    }\r\n}\r\n\r\nexport const loginTC = (email: string, password: string, rememberMe: boolean, captcha: string | null) => async (dispatch: Dispatch<any>) => {\r\n    const response = await authAPI.login(email, password, rememberMe,captcha)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserDataTC())\r\n    } else {\r\n        if (response.data.resultCode === 10) {\r\n            dispatch(getCaptcha())\r\n        }\r\n        let message = response.data.messages.length > 0 ? response.data.messages : 'Some error'\r\n        dispatch(stopSubmit('login', {_error: `${message}`}))\r\n    }\r\n}\r\n\r\nexport const getCaptcha = () => async (dispatch: Dispatch<any>) => {\r\n    const response = await securityAPI.getCaptchaUrl()\r\n    dispatch(setCaptchaUrl(response.data.url))\r\n}\r\n\r\nexport const logoutTC = () => async (dispatch: Dispatch<AuthActionType>) => {\r\n    const response = await authAPI.logout()\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setUserDataAC(null, null, null, false))\r\n    }\r\n}\r\n\r\n//types\r\nexport type AuthStateType = {\r\n    id: string | null\r\n    email: string | null\r\n    login: string | null\r\n    isAuth: boolean\r\n    captcha: null | string\r\n}\r\nexport type AuthActionType =\r\n    | ReturnType<typeof setUserDataAC>\r\n    | ReturnType<typeof setCaptchaUrl>\r\n\r\n","import React from 'react';\r\nimport style from './Loader.module.css'\r\n\r\nexport const Loader = () => {\r\n    return <div className={style.ldsRing}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n    </div>\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__ik6ZR\",\"loginBlock\":\"Header_loginBlock__2LZXi\"};","import React, {FC} from 'react';\r\nimport style from './Button.module.css'\r\n\r\ntype ButtonPropsType =\r\n    React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement> &\r\n    { name?: string };\r\n\r\nexport const Button: FC<ButtonPropsType> = React.memo(({name, ...rest}) => {\r\n    return <button className={style.button}\r\n                   {...rest}\r\n    >\r\n        {name}\r\n    </button>\r\n})","import {v1} from 'uuid'\r\nimport {Dispatch} from 'react';\r\nimport {profileAPI, usersAPI} from '../../api/api';\r\nimport {RootState} from '../../redux/redux-store';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\nconst ADD_POST = 'profile/ADD_POST'\r\nconst SET_USER_PROFILE = 'profile/SET_USER_PROFILE'\r\nconst SET_STATUS = 'profile/SET_STATUS'\r\nconst CHANGE_STATUS = 'profile/CHANGE_STATUS'\r\nconst SAVE_PHOTO_SUCCESS = 'profile/SAVE_PHOTO_SUCCESS'\r\n\r\n//Разобраться с newPostText в инитиал стейте\r\n\r\nconst initialState: ProfileStateType = {\r\n    posts: [\r\n        {id: v1(), message: 'Hi', likeCounts: 25},\r\n        {id: v1(), message: 'Hello', likeCounts: 20},\r\n    ],\r\n    newPostText: '',\r\n    profile: null ,\r\n    status: '',\r\n}\r\n\r\nexport const profileReducer = (state\r\n                                   = initialState, action: ProfileActionType): ProfileStateType => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost: PostType = {\r\n                id: v1(),\r\n                message: action.postText,\r\n                likeCounts: 0\r\n            }\r\n            return {\r\n                ...state,\r\n                posts: [newPost,...state.posts],\r\n            };\r\n        case SET_USER_PROFILE : {\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_STATUS: {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case CHANGE_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.newStatus\r\n            }\r\n        case SAVE_PHOTO_SUCCESS:\r\n            debugger\r\n            return {\r\n\r\n                ...state,\r\n                profile : {...state.profile,photos: action.photo} as ProfileType\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//actions\r\nexport const addPostAC = (text: string) => ({type: ADD_POST, postText: text} as const)\r\nexport const setUserProfileAC = (profile: ProfileType) => ({type: SET_USER_PROFILE, profile} as const)\r\nexport const setStatusAC = (status: string) => ({type: SET_STATUS, status} as const)\r\nexport const changeStatusAC = (newStatus: string) => ({type: CHANGE_STATUS, newStatus} as const)\r\nexport const savePhotoSuccessAC = (photo: PhotosType) => ({type: SAVE_PHOTO_SUCCESS, photo} as const)\r\n\r\n//thunks\r\nexport const getUserProfile = (userId: string | null) => {\r\n    return (dispatch: DispatchUserProfile) => {\r\n\r\n        usersAPI.getUserProfile(userId)\r\n            .then(data => {\r\n\r\n                dispatch(setUserProfileAC(data))\r\n            })\r\n    }\r\n}\r\nexport const getUserStatus = (userId: string) => async (dispatch: Dispatch<ProfileActionType>) => {\r\n    const resolve = await profileAPI.getStatus(userId)\r\n    dispatch(setStatusAC(resolve))\r\n}\r\n\r\nexport const changeUserStatus = (newStatus: string) => async (dispatch: Dispatch<ProfileActionType>) => {\r\n    let response = await profileAPI.changeStatus(newStatus)\r\n    if (response.resultCode === 0) {\r\n        dispatch(changeStatusAC(newStatus))\r\n    }\r\n}\r\n\r\nexport const ChangeMyPhoto = (photo: File) => async (dispatch: Dispatch<ProfileActionType>) => {\r\n    let response = await profileAPI.ChangeMyPhoto(photo)\r\n\r\n    if (response.resultCode === 0) {\r\n        dispatch(savePhotoSuccessAC(response.data.photos))\r\n    }\r\n}\r\nexport const saveProfileData = (profile:any) => async (dispatch: Dispatch<any>,getState : () => RootState) => {\r\n    const id = getState().auth.id\r\n    const response = await profileAPI.saveProfileData(profile)\r\n\r\n    if (response.resultCode === 0) {\r\n       dispatch(getUserProfile(id))\r\n    } else  {\r\n        dispatch(stopSubmit('edit-profile', {_error: `${response.messages[0]}`}))\r\n        return Promise.reject(response.messages[0])\r\n    }\r\n}\r\n\r\n//types\r\n\r\nexport type ProfileStateType = {\r\n    posts: Array<PostType>,\r\n    newPostText: string,\r\n    profile: ProfileType | null\r\n    status: string\r\n}\r\nexport type ProfileType = {\r\n    aboutMe: string\r\n    contacts: ContactsType\r\n    lookingForAJob: boolean,\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    userId: number,\r\n    photos: PhotosType\r\n}\r\nexport type ContactsType  = { [key: string]: string; }\r\nexport type PhotosType = {\r\n    small: string\r\n    large: string\r\n}\r\ntype DispatchUserProfile = Dispatch<ProfileActionType>\r\nexport type ProfileActionType =\r\n    | ReturnType<typeof addPostAC>\r\n    | ReturnType<typeof setUserProfileAC>\r\n    | ReturnType<typeof setStatusAC>\r\n    | ReturnType<typeof changeStatusAC>\r\n    | ReturnType<typeof savePhotoSuccessAC>\r\nexport type PostType = {\r\n    id: string,\r\n    message: string,\r\n    likeCounts: number\r\n}\r\n\r\nexport type ProfilePageType = {\r\n    posts: Array<PostType>,\r\n    newPostText: string\r\n}\r\n\r\n\r\n","import {v1} from 'uuid';\r\n\r\nconst ADD_MESSAGE = 'dialogs/Add-Message'\r\n\r\nlet initialState: DialogsStateType = {\r\n    dialogs: [\r\n        {id: v1(), name: 'Alex'},\r\n        {id: v1(), name: 'Dima'},\r\n        {id: v1(), name: 'Azamat'},\r\n        {id: v1(), name: 'Sergey'},\r\n        {id: v1(), name: 'Alexander'},\r\n    ],\r\n    messages: [\r\n        {id: v1(), message: 'Hello'},\r\n        {id: v1(), message: 'h1'},\r\n        {id: v1(), message: 'How yo`re doing?'},\r\n        {id: v1(), message: 'bye'},\r\n    ],\r\n    newMessageText: '',\r\n}\r\n \r\n//actions\r\nexport const dialogsReducer = (state = initialState, action: DialogsActionType) => {\r\n    switch (action.type) {\r\n        case ADD_MESSAGE :\r\n            let newMessage: MessageType = {\r\n                id: v1(),\r\n                message: action.messageText\r\n            }\r\n            return {\r\n                ...state,\r\n                messages: [\r\n                    ...state.messages,\r\n                    newMessage,\r\n                ],\r\n\r\n            }\r\n        default:\r\n            return state\r\n\r\n    }\r\n}\r\nexport const addMessageAC = (text: string) => ({type: ADD_MESSAGE, messageText: text} as const)\r\n\r\n//types\r\n\r\nexport type  DialogsActionType =\r\n    | ReturnType<typeof addMessageAC>\r\nexport type DialogsStateType = {\r\n    dialogs: Array<DialogType>,\r\n    messages: Array<MessageType>,\r\n    newMessageText: string,\r\n}\r\nexport type MessageType = {\r\n    id: string\r\n    message: string\r\n}\r\nexport type DialogType = {\r\n    id: string,\r\n    name: string\r\n}\r\n\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': '628f1297-6b8a-455c-a591-d2e75c4bd3a6'\r\n    }\r\n})\r\n\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`,\r\n            {withCredentials: true})\r\n            .then(response => response.data)\r\n    },\r\n    getUserProfile(userId?: string | null) {\r\n        console.warn('Obsolete method.Please profileAPI object');\r\n        return profileAPI.getUserProfile(userId);\r\n    },\r\n    followUser(userId: number) {\r\n        return instance.post(`follow/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    unFollowUser(userId: number) {\r\n        return instance.delete(`follow/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\n\r\nexport const profileAPI = {\r\n    getUserProfile(userId : null | string = '9442') {\r\n        return instance.get(`profile/` + userId)\r\n            .then(response => response.data)\r\n    },\r\n    getStatus(userId: string) {\r\n        return instance.get(`profile/status/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    changeStatus(status: string) {\r\n        return instance.put('profile/status', {status})\r\n            .then(response => response.data);\r\n    },\r\n    ChangeMyPhoto(photoFile: File) {\r\n\r\n    const formData = new FormData();\r\n    formData.append('image',photoFile)\r\n\r\n        return instance.put('profile/photo',formData,{ headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }})\r\n            .then(response => response.data)\r\n    },\r\n    saveProfileData(profile:any) {\r\n        return instance.put(`profile`,profile)\r\n            .then(response => response.data)\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get(`auth/me`)\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean = false, captcha : string | null = null) {\r\n        return instance.post('/auth/login', {email, password, rememberMe,captcha})\r\n    },\r\n    logout() {\r\n        return instance.delete('/auth/login')\r\n    },\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get(`security/get-captcha-url`)\r\n    },\r\n}\r\n","export const updateObjectInArray = (items: Array<any>, itemId: any, objPropertyName: any, newObjProps: any) => {\r\n    return  items.map(u => {\r\n        if (u[objPropertyName] === itemId) {\r\n            return {...u, ...newObjProps}\r\n        } else {\r\n            return u\r\n        }\r\n    })\r\n}","import {usersAPI} from '../../api/api';\r\nimport {Dispatch} from 'react';\r\nimport {updateObjectInArray} from '../../utils/validators/objects-helper';\r\n\r\nconst FOLLOW = 'user/FOLLOW'\r\nconst UNFOLLOW = 'user/UNFOLLOW'\r\nconst SET_USERS = 'user/SET_USERS'\r\nconst SET_CURRENT_PAGE = 'user/SET_CURRENT_PAGE'\r\nconst SET_TOTAL_COUNT = 'user/SET_TOTAL_COUNT'\r\nconst TOGGLE_IS_FETCHING = 'user/TOGGLE_IS_FETCHING'\r\nconst TOGGLE_FOLLOWING_PROGRESS = 'user/TOGGLE_FOLLOWING_PROGRESS'\r\n\r\nexport let InitialState: UsersStateType = {\r\n    users: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: [],\r\n    portionSize: 10\r\n}\r\n\r\n\r\nexport const usersReducer = (state = InitialState, action: UserActionType): UsersStateType => {\r\n    switch (action.type) {\r\n        case FOLLOW :\r\n            return {\r\n                ...state,\r\n                users : updateObjectInArray(state.users,action.userId,'id',{followed: true})\r\n            }\r\n        case UNFOLLOW :\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users,action.userId,'id',{followed: false})\r\n            }\r\n        case SET_USERS:\r\n            return {...state, users: [...action.users]}\r\n        case SET_CURRENT_PAGE:\r\n            return {...state, currentPage: action.currentPage}\r\n        case SET_TOTAL_COUNT:\r\n            return {...state, totalUsersCount: action.totalCount}\r\n        case TOGGLE_IS_FETCHING:\r\n            return {...state, isFetching: action.value}\r\n        case TOGGLE_FOLLOWING_PROGRESS: {\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching ?\r\n                    [...state.followingInProgress, action.userId] :\r\n                    state.followingInProgress.filter(id => id != action.userId)\r\n            }\r\n        }\r\n        default :\r\n            return state\r\n    }\r\n};\r\n\r\n\r\n//actions\r\nexport const followAC = (userId: number) => ({type: FOLLOW, userId} as const)\r\nexport const unFollowAC = (userId: number) => ({type: UNFOLLOW, userId} as const)\r\nexport const setUsersAC = (users: Array<UsersType>) => ({type: SET_USERS, users} as const)\r\nexport const setCurrentPageAC = (currentPage: number) => ({type: SET_CURRENT_PAGE, currentPage} as const)\r\nexport const setTotalCountAC = (totalCount: number) => ({type: SET_TOTAL_COUNT, totalCount} as const)\r\nexport const toogleIsFetchingAC = (value: boolean) => ({type: TOGGLE_IS_FETCHING, value} as const)\r\nexport const toogleFollowingProgressAC = (isFetching: boolean, userId: number) => ({\r\n    type: TOGGLE_FOLLOWING_PROGRESS,\r\n    isFetching,\r\n    userId\r\n} as const)\r\n\r\n\r\n//thunks\r\nexport const requestUsers = (page: number, pageSize: number) => async (dispatch: DispatchType) => {\r\n\r\n    dispatch(toogleIsFetchingAC(true))\r\n    dispatch(setCurrentPageAC(page))\r\n\r\n    const response = await usersAPI.getUsers(page, pageSize)\r\n\r\n    dispatch(toogleIsFetchingAC(false))\r\n    dispatch(setUsersAC(response.items))\r\n    dispatch(setTotalCountAC(response.totalCount))\r\n}\r\n\r\n\r\nconst followUnfollowFlow =  async (dispatch: DispatchType,userID: number,apiMethod: any, actionCreator : any ) => {\r\n    dispatch(toogleFollowingProgressAC(true, userID))\r\n    const response = await apiMethod(userID)\r\n\r\n    if (response.resultCode === 0) {\r\n        dispatch(actionCreator(userID))\r\n    }\r\n\r\n    dispatch(toogleFollowingProgressAC(false, userID))\r\n}\r\n\r\n\r\n\r\nexport const unFollowUserThunk = (userID: number) => async (dispatch: DispatchType) => {\r\n    await followUnfollowFlow(dispatch,userID,usersAPI.unFollowUser.bind(userID),unFollowAC)\r\n}\r\nexport const followUserThunk = (userID: number) => async (dispatch: DispatchType) => {\r\n    await followUnfollowFlow(dispatch,userID,usersAPI.followUser.bind(userID),followAC)\r\n}\r\n\r\n//types\r\ntype DispatchType = Dispatch<UserActionType>\r\nexport type UsersStateType = {\r\n    users: Array<UsersType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followingInProgress: Array<number>\r\n    portionSize: number\r\n\r\n}\r\nexport type UsersType = {\r\n    name: string\r\n    id: number\r\n    uniqueUrlName: null\r\n    photos: FhotoUserType\r\n    status: null\r\n    followed: boolean\r\n}\r\ntype FhotoUserType = {\r\n    small: null | string\r\n    large: null | string\r\n}\r\ntype Location = {\r\n    country: string\r\n    city: string\r\n}\r\nexport type UserActionType =\r\n    | ReturnType<typeof followAC>\r\n    | ReturnType<typeof unFollowAC>\r\n    | ReturnType<typeof setUsersAC>\r\n    | ReturnType<typeof setCurrentPageAC>\r\n    | ReturnType<typeof setTotalCountAC>\r\n    | ReturnType<typeof toogleIsFetchingAC>\r\n    | ReturnType<typeof toogleFollowingProgressAC>\r\n\r\n\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.b4b06117.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3SsT2\",\"buton\":\"Button_buton__2yP8Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ldsRing\":\"Loader_ldsRing__3bMNV\"};"],"sourceRoot":""}